<!DOCTYPE html>
<html lang="en">

<head th:replace="common/head">
    <meta charset="utf-8">
    <title>Pika</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<style>
    @font-face {
        font-family: 'TheJamsil5Bold';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302_01@1.0/TheJamsil5Bold.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
    }

    body {
        font-family: 'TheJamsil5Bold';
        height: 100vh;
        background-color: #000;
        background-size: cover;
        background-repeat: no-repeat;
    }

    .container {
        display: block;
        margin: 0;
    }

    .map-design {
        flex-grow: 1;
        height: 37.3rem;
        width: 94.2rem;
    }

    .info-box {
        padding: 10px;
        margin: 5px;
        width: 250px;
        height: 150px;
        font-size: 12px;
    }

    .asidebar {
        width: 18rem;
        height: 32rem;
        color: #202020;
        transition: 0.4s ease;
        z-index: 99;
        position: absolute;
        left: 0;
    }

    .ininfo {
        background-color: white;
        padding: 10px;
        margin: 5px;
        width: 250px;
        height: 150px;
        font-size: 12px;
    }

    .toggle-btn {
        position: absolute;
        left: 18rem;
        top: 0;
        height: 37.3rem;
        width: 2rem;
        background-color: #faf5d7;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .list-group-item {
        padding: 0.565rem 1rem;
    }
</style>

<body>
    <div th:replace="common/header"></div>

    <nav th:replace="common/nav"></nav>

    <div class="container">

        <div class="asidebar" id="mySidebar">
            <ul class="list-group">
                <li class="list-group-item">
                    <div>ë°˜ê²½ <input type="text" class="distance" style="width: 44px;"> km ë‚´ì˜ ì¶©ì „ì†Œ</div>
                    <button onclick="getData()">ì°¾ê¸°</button>
                    <button onclick="removeMarkers(),removeInfo()">ìˆ¨ê¸°ê¸°</button>
                </li>

                <li class="list-group-item">
                    <h5>êµ¬</h5>
                </li>
                <li class="list-group-item">
                    <label style="color: black;"><input type="checkbox" id="areacheck1"
                            onchange="handleCheckboxChange('ë¶êµ¬', this.checked)">ë¶êµ¬</label>
                    <label style="color: black;"><input type="checkbox" id="areacheck2"
                            onchange="handleCheckboxChange('ê´‘ì‚°êµ¬', this.checked)">ê´‘ì‚°êµ¬</label>
                    <label style="color: black;"><input type="checkbox" id="areacheck3"
                            onchange="handleCheckboxChange('ì„œêµ¬', this.checked)">ì„œêµ¬</label>
                    <label style="color: black;"><input type="checkbox" id="areacheck4"
                            onchange="handleCheckboxChange('ë™êµ¬', this.checked)">ë™êµ¬</label>
                    <label style="color: black;"><input type="checkbox" id="areacheck5"
                            onchange="handleCheckboxChange('ë‚¨êµ¬', this.checked)">ë‚¨êµ¬</label>
                    <label style="color: black;"><input type="checkbox" id="areacheck6"
                            onchange="handleCheckboxChange2('ì „ì²´', this.checked)">ì „ì²´</label><br>
                </li>

                <li class="list-group-item">
                    <h5>ìš´ì˜ê¸°ê´€</h5>
                </li>
                <li class="list-group-item">
                    <label style="color: black;"><input type="checkbox" id="companycheck1"
                            onchange="handleCompanyCheckboxChange('í•œêµ­ì „ë ¥', this.checked)">í•œêµ­ì „ë ¥</label>
                    <label style="color: black;"><input type="checkbox" id="companycheck2"
                            onchange="handleCompanyCheckboxChange('í™˜ê²½ë¶€(í•œêµ­ìë™ì°¨í™˜ê²½í˜‘íšŒ)', this.checked)">í™˜ê²½ë¶€(í•œêµ­ìë™ì°¨í™˜ê²½í˜‘íšŒ)</label>
                    <label style="color: black;"><input type="checkbox" id="companycheck3"
                            onchange="handleCompanyCheckboxChange('GSì¹¼í…ìŠ¤', this.checked)">GSì¹¼í…ìŠ¤</label>
                    <label style="color: black;"><input type="checkbox" id="companycheck4"
                            onchange="handleCompanyCheckboxChange('SGìƒí™œì•ˆì „', this.checked)">SGìƒí™œì•ˆì „</label>
                    <label style="color: black;"><input type="checkbox" id="companycheck5"
                            onchange="handleCompanyCheckboxChange('íŒŒí‚¹í´ë¼ìš°ë“œ', this.checked)">íŒŒí‚¹í´ë¼ìš°ë“œ</label>
                    <label style="color: black;"><input type="checkbox" id="companycheck6"
                            onchange="handleCompanyCheckboxChange('LGìœ í”ŒëŸ¬ìŠ¤', this.checked)">LGìœ í”ŒëŸ¬ìŠ¤</label><br>
                </li>

                <li class="list-group-item">
                    <h5>ì¶©ì „ê¸°íƒ€ì…</h5>
                </li>
                <li class="list-group-item">
                    <label style="color: black;"><input type="checkbox" id="typecheck1"
                            onchange="handleTypeCheckboxChange('AC3ìƒ', this.checked)">AC3ìƒ</label>
                    <label style="color: black;"><input type="checkbox" id="typecheck2"
                            onchange="handleTypeCheckboxChange('ACì™„ì†', this.checked)">ACì™„ì†</label>
                    <label style="color: black;"><input type="checkbox" id="typecheck3"
                            onchange="handleTypeCheckboxChange('DCì½¤ë³´', this.checked)">DCì½¤ë³´</label>
                    <label style="color: black;"><input type="checkbox" id="typecheck4"
                            onchange="handleTypeCheckboxChange('DCì°¨ë°ëª¨', this.checked)">DCì°¨ë°ëª¨</label>
                </li>

                <li class="list-group-item">
                    <h5>ì‹œì„¤êµ¬ë¶„</h5>
                </li>
                <li class="list-group-item">
                    <label style="color: black;"><input type="checkbox" id="bigcheck1"
                            onchange="handleBigCheckboxChange('ê³µê³µì‹œì„¤', this.checked)">ê³µê³µì‹œì„¤</label>
                    <label style="color: black;"><input type="checkbox" id="bigcheck2"
                            onchange="handleBigCheckboxChange('ê´€ê´‘ì‹œì„¤', this.checked)">ê´€ê´‘ì‹œì„¤</label>
                    <label style="color: black;"><input type="checkbox" id="bigcheck3"
                            onchange="handleBigCheckboxChange('êµìœ¡ë¬¸í™”ì‹œì„¤', this.checked)">êµìœ¡ë¬¸í™”ì‹œì„¤</label>
                    <label style="color: black;"><input type="checkbox" id="bigcheck4"
                            onchange="handleBigCheckboxChange('ìƒì—…ì‹œì„¤', this.checked)">ìƒì—…ì‹œì„¤</label>
                    <label style="color: black;"><input type="checkbox" id="bigcheck5"
                            onchange="handleBigCheckboxChange('ì£¼ì°¨ì‹œì„¤', this.checked)">ì£¼ì°¨ì‹œì„¤</label>
                </li>
            </ul>
            <!-- ë²„íŠ¼ ì¶”ê°€ -->
            <div class="toggle-btn" onclick="toggleSidebar()">
                <span id="toggleBtnText">ğŸ“‚</span>
            </div>
        </div>

        <div id="map" class="map-design"></div>

    </div>

    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f6654953f7f2de9be8090793a3c14e09&libraries=services">

    </script>

    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById('mySidebar');
            var btnText = document.getElementById('toggleBtnText');
            var sidebarOpen = sidebar.style.left === '0px';

            if (sidebarOpen) {
                sidebar.style.left = '-18rem';
            } else {
                sidebar.style.left = '0px';
            }
        }
    </script>

    <script>
        let map;
        let markers = [];
        var content;
        var infowindow;

        //í˜„ì¬ìœ„ì¹˜ ë¶ˆëŸ¬ë‚´ëŠ” api
        navigator.geolocation.getCurrentPosition(function (position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            createMap(lat, lng);
            createMarker5(lat, lng);
        });

        function createMap(lat, lng) {
            const container = document.getElementById('map');
            const options = {
                center: new kakao.maps.LatLng(lat, lng),
                level: 6
            };
            map = new kakao.maps.Map(container, options);
        }

        function getData() {
            navigator.geolocation.getCurrentPosition(function (position) {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                fetch('/tetest/data')
                    .then(response => response.json())
                    .then(data => {
                        data.forEach(v => {
                            const stationlat = v.latitude;
                            const stationlng = v.longitude;

                            let distancesArray = [];
                                        let distanceInKm = getDistanceFromLatLonInKm(lng, lat, stationlng, stationlat);
                                        const distance = document.querySelector('.distance').value;
                                        if (distanceInKm <= distance) {
                                            var address = `${v.address}`;
                                             var kakaoMapLink = "https://map.kakao.com/link/map/" + encodeURIComponent(address);

                                            var content =
                                `<div class="ininfo"> ì¶©ì „ì†Œ ìœ„ì¹˜: ${v.name} <br> ì£¼ì†Œ: ${v.address} <br> ìš´ì˜ê¸°ê´€: ${v.company} <br> ì´ìš©ê°€ëŠ¥ì‹œê°„: ${v.tim} <br>
                                                <a href="${kakaoMapLink}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a> </div>`;
                                                
                                            createMarker(stationlat, stationlng,content);

                                        }
                                    });
                                })
                                .catch(error => console.log(error));

            }
            );
        }

        function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
            var R = 6371; // Radius of the earth in km
            var dLat = deg2rad(lat2 - lat1);  // deg2rad below
            var dLon = deg2rad(lon2 - lon1);
            var a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2)
                ;
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            var d = R * c; // Distance in km
            return d;
        }

        function deg2rad(deg) {
            return deg * (Math.PI / 180)
        }

        function createMarker(lat, lng, content) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'https://cdn-icons-png.flaticon.com/512/7512/7512521.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(50, 52), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });
            infowindow = new kakao.maps.InfoWindow({
                content: content,
                removable: true
            });

            kakao.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(content);
                infowindow.open(map, marker);
                map.panTo(markerPosition);

            });
            const mark = {
                marker: marker,
                add: 1
            }
            markers.push(mark);
            marker.setMap(map);
        }

        function createMarker5(lat, lng) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'mini.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(50, 52), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });
            markers.push(marker);
            marker.setMap(map);
        }

        function getData1(city) {
            fetch('/tetest/data')
                .then(response => response.json())
                .then(data => {
                    data.forEach(v => {
                        const lat = v.latitude;
                        const lng = v.longitude;
                        const cityData = v.city;

                        if (cityData === city) {
                            var address = `${v.address}`;
                            var kakaoMapLink = "https://map.kakao.com/link/map/" + encodeURIComponent(address);

                            var content =
                                `<div class="ininfo"> ì¶©ì „ì†Œ ìœ„ì¹˜: ${v.name} <br> ì£¼ì†Œ: ${v.address} <br> ìš´ì˜ê¸°ê´€: ${v.company} <br> ì´ìš©ê°€ëŠ¥ì‹œê°„: ${v.tim} <br>
                                                <a href="${kakaoMapLink}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a> </div>`;
                            cityaddress = city;
                            createMarker1(lat, lng, content);
                        }

                    });
                })
                .catch(error => console.log(error));
        }

        function getData2(company) {
            fetch('/tetest/data')
                .then(response => response.json())
                .then(data => {
                    data.forEach(v => {
                        const lat = v.latitude;
                        const lng = v.longitude;
                        const companyData = v.company;

                        if (companyData === company) {
                            var address = `${v.address}`;
                            var kakaoMapLink = "https://map.kakao.com/link/map/" + encodeURIComponent(address);

                            var content =
                                `<div class="ininfo"> ì¶©ì „ì†Œ ìœ„ì¹˜: ${v.name} <br> ì£¼ì†Œ: ${v.address} <br> ìš´ì˜ê¸°ê´€: ${v.company} <br> ì´ìš©ê°€ëŠ¥ì‹œê°„: ${v.tim} <br>
                                                <a href="${kakaoMapLink}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a> </div>`;
                            companyaddress = company;
                            createMarker2(lat, lng, content);
                        }

                    });
                })
                .catch(error => console.log(error));
        }

        function getData3(spottype) {
            fetch('/tetest/data')
                .then(response => response.json())
                .then(data => {
                    data.forEach(v => {
                        const lat = v.latitude;
                        const lng = v.longitude;
                        const spottypeData = v.spottype

                        if (spottypeData === spottype) {
                            var address = `${v.address}`;
                            var kakaoMapLink = "https://map.kakao.com/link/map/" + encodeURIComponent(address);

                            var content =
                                `<div class="ininfo"> ì¶©ì „ì†Œ ìœ„ì¹˜: ${v.name} <br> ì£¼ì†Œ: ${v.address} <br> ìš´ì˜ê¸°ê´€: ${v.company} <br> ì´ìš©ê°€ëŠ¥ì‹œê°„: ${v.tim} <br>
                                                <a href="${kakaoMapLink}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a> </div>`;
                            spottypeaddress = spottype;
                            createMarker3(lat, lng, content);
                        }

                    });
                })
                .catch(error => console.log(error));
        }

        function getData4(big) {
            fetch('/tetest/data')
                .then(response => response.json())
                .then(data => {
                    data.forEach(v => {
                        const lat = v.latitude;
                        const lng = v.longitude;
                        const bigData = v.big

                        if (bigData === big) {
                            var address = `${v.address}`;
                            var kakaoMapLink = "https://map.kakao.com/link/map/" + encodeURIComponent(address);

                            var content =
                                `<div class="ininfo"> ì¶©ì „ì†Œ ìœ„ì¹˜: ${v.name} <br> ì£¼ì†Œ: ${v.address} <br> ìš´ì˜ê¸°ê´€: ${v.company} <br> ì´ìš©ê°€ëŠ¥ì‹œê°„: ${v.tim} <br>
                                                <a href="${kakaoMapLink}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a> </div>`;
                            bigaddress = big;
                            createMarker4(lat, lng, content);
                        }

                    });
                })
                .catch(error => console.log(error));
        }

        function createMarker1(lat, lng, content, city) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'https://cdn-icons-png.flaticon.com/512/7512/7512521.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(50, 52), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);

            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });

            infowindow = new kakao.maps.InfoWindow({
                content: content,
                removable: true
            });

            kakao.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(content);
                infowindow.open(map, marker);
                map.panTo(markerPosition);

            });

            const mark = {
                marker: marker,
                add: cityaddress
            }

            markers.push(mark);
            marker.setMap(map);
        }

        function createMarker2(lat, lng, content, company) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'maker1.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(40, 42), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });

            infowindow = new kakao.maps.InfoWindow({
                content: content,
                removable: true
            });

            kakao.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(content);
                infowindow.open(map, marker);
                map.panTo(markerPosition);
                updateInfoBox(company);
            });

            const mark = {
                marker: marker,
                add: companyaddress
            }

            markers.push(mark);
            marker.setMap(map);
        }

        function createMarker3(lat, lng, content, spottype) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'maker2.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(50, 52), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });

            infowindow = new kakao.maps.InfoWindow({
                content: content,
                removable: true
            });

            kakao.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(content);
                infowindow.open(map, marker);
                map.panTo(markerPosition);
                updateInfoBox(spottype);
            });

            const mark = {
                marker: marker,
                add: spottypeaddress
            }

            markers.push(mark);
            marker.setMap(map);
        }

        function createMarker4(lat, lng, content, spottype) {
            const markerPosition = new kakao.maps.LatLng(lat, lng);
            var imageSrc = 'maker3.png', // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤    
                imageSize = new kakao.maps.Size(50, 52), // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                imageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì˜µì…˜ì…ë‹ˆë‹¤. ë§ˆì»¤ì˜ ì¢Œí‘œì™€ ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ì•ˆì—ì„œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            // ë§ˆì»¤ì˜ ì´ë¯¸ì§€ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);
            const marker = new kakao.maps.Marker({
                position: markerPosition,
                image: markerImage
            });

            infowindow = new kakao.maps.InfoWindow({
                content: content,
                removable: true
            });

            kakao.maps.event.addListener(marker, 'click', function () {
                infowindow.setContent(content);
                infowindow.open(map, marker);
                map.panTo(markerPosition);
                updateInfoBox(spottype);
            });

            const mark = {
                marker: marker,
                add: bigaddress
            }

            markers.push(mark);
            marker.setMap(map);
        }

        function removeInfo() {
            infowindow.close();
        }
        function removeInfo1() {
            infowindow.close();
        }

        function removeInfo2() {
            infowindow.close();
        }

        function removeInfo3() {
            infowindow.close();
        }

        function removeInfo4() {
            infowindow.close();
        }

        function removeMarkers() {
            markers.forEach(mark => {
                const marker = mark.marker;
                if (mark.add == 1) {
                    marker.setMap(null); // ì§€ë„ì—ì„œ ì œê±°
                }
            });
        }

        function removeMarkers1(city) {
            markers.forEach(mark => {
                const marker = mark.marker;
                if (mark.add === city) {
                    marker.setMap(null); // ì§€ë„ì—ì„œ ì œê±°
                }
            });
        }

        function removeMarkers2(company) {
            markers.forEach(mark => {
                const marker = mark.marker;
                if (mark.add === company) {
                    marker.setMap(null); // ì§€ë„ì—ì„œ ì œê±°
                }
            });
        }

        function removeMarkers3(spottype) {
            markers.forEach(mark => {
                const marker = mark.marker;
                if (mark.add === spottype) {
                    marker.setMap(null); // ì§€ë„ì—ì„œ ì œê±°
                }
            });
        }

        function removeMarkers4(big) {
            markers.forEach(mark => {
                const marker = mark.marker;
                if (mark.add === big) {
                    marker.setMap(null); // ì§€ë„ì—ì„œ ì œê±°
                }
            });
        }

        function handleCheckboxChange(city, checked) {
            if (checked) {

                getData1(city);
            } else {
                removeInfo1();
                removeMarkers1(city);
            }
        }

        function handleCheckboxChange2(city, checked) {
            if (checked) {
                getData1('ë¶êµ¬');
                getData1('ê´‘ì‚°êµ¬');
                getData1('ë™êµ¬');
                getData1('ë‚¨êµ¬');
                getData1('ì„œêµ¬');
            } else {
                removeMarkers1('ë¶êµ¬');
                removeMarkers1('ê´‘ì‚°êµ¬');
                removeMarkers1('ë™êµ¬');
                removeMarkers1('ë‚¨êµ¬');
                removeMarkers1('ì„œêµ¬');
            }
        }

        function handleCompanyCheckboxChange(company, checked) {
            if (checked) {
                getData2(company);
            } else {
                removeInfo1();
                removeMarkers2(company);
            }
        }

        function handleTypeCheckboxChange(spottype, checked) {
            if (checked) {
                getData3(spottype);
            } else {
                removeInfo1();
                removeMarkers3(spottype);
            }
        }

        function handleBigCheckboxChange(big, checked) {
            if (checked) {
                getData4(big);
            } else {
                removeInfo1();
                removeMarkers4(big);
            }
        }

    </script>

</body>

</html>